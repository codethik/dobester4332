"use strict";angular.module("coursExoApp",["ngRoute"]).config(["$routeProvider","$sceProvider",function(a,b){b.enabled(!1),a.when("/popular",{templateUrl:"views/movies.html",controller:"PopularCtrl"}).when("/search/:query",{templateUrl:"views/movies.html",controller:"SearchCtrl"}).when("/info/:id",{templateUrl:"views/info.html",controller:"InfoCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/pickupserie",{templateUrl:"views/pickupserie.html",controller:"PickupserieCtrl",controllerAs:"pickupserie"}).otherwise({redirectTo:"/pickupserie"})}]),angular.module("coursExoApp").controller("PopularCtrl",["$scope","serviceAjax",function(a,b){a.currentPage=1,a.totalPages=0,a.nbItems=1,a.loading=!0,a.orderByPredicate="vote_average",a.orderByReverse=!0,a.loadMovies=function(){a.loading=!0,b.popular(a.currentPage).success(function(b){a.loading=!1,a.movies=b.results,a.totalPages=b.total_pages})},a.pageChanged=function(){a.loadMovies()},a.clickPredicateName=function(){a.orderByReverse=!a.orderByReverse,a.orderByPredicate="title"},a.clickPredicateRate=function(){a.orderByReverse=!a.orderByReverse,a.orderByPredicate="vote_average"},a.loadMovies()}]),angular.module("coursExoApp").factory("serviceAjax",["$http","$q",function(a,b){return{search:function(b,c){return a.get("http://localhost:3000/search?q="+b+"&page="+c)},info:function(b){return a.get("http://localhost:3000/info/"+b)},popular:function(b){return a.get("http://localhost:3000/popular?page="+b)},getAllRestaurants:function(b){return a.get("http://localhost:3000/allRestaurants")},goodSerieByGenre:function(b,c){return a.get("http://localhost:3000/discover/tv?genre="+c+"&vote_average.gte=5")},goodSerie:function(b){return a.get("http://localhost:3000/discover/tv/all")},videos:function(b){return a.get("http://localhost:3000/videos/"+b)}}}]),angular.module("coursExoApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.query="",a.searchAction=function(){b.path("/search/"+a.query)}}]),angular.module("coursExoApp").controller("SearchCtrl",["$scope","$routeParams","serviceAjax",function(a,b,c){a.query=b.query,a.currentPage=1,a.totalPages=0,a.loading=!0,a.orderByPredicate="title",a.orderByReverse=!1,a.loadMovies=function(){a.loading=!0,c.tvDiscover(a.query,a.currentPage).success(function(b){a.loading=!1,a.movies=b.results,a.totalPages=b.total_pages})},a.pageChanged=function(){a.loadMovies()},a.clickPredicateName=function(){a.orderByReverse=!a.orderByReverse,a.orderByPredicate="title"},a.clickPredicateRate=function(){a.orderByReverse=!a.orderByReverse,a.orderByPredicate="vote_average"},a.loadMovies()}]),angular.module("coursExoApp").controller("InfoCtrl",["$scope","$routeParams","serviceAjax",function(a,b,c){var d=b.id;a.loading=!0,a.infoMovie=function(){c.info(d).success(function(b){a.loading=!1,a.movie=b,a.adStatus=!1,console.log("from InfoCtrl(infoMovie):"+b)})},a.videos=function(){c.videos(d).success(function(b){a.videos="https://youtu.be/"+b.results[0].key,console.log("from InfoCtrl(infoVideos): "+b)})},a.externalSearch=function(){var b=a.movie.name;encodeURI(b),window.open("https://www.netflix.com/search?q="+b),window.open("http://full-stream.tv/?s="+b)},a.infoMovie(),a.videos()}]),angular.module("coursExoApp").directive("loading",function(){return{template:'<div><div ng-show="loading" class="loading-container"></div><div ng-hide="loading" ng-transclude></div></div>',restrict:"A",transclude:!0,replace:!0,scope:{loading:"=loading"},compile:function(a,b,c){var d=(new Spinner).spin(),e=a.find(".loading-container")[0];void 0!=e&&e.appendChild(d.el)}}}),angular.module("coursExoApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("coursExoApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("coursExoApp").controller("AllrestaurantsCtrl",["$scope","serviceAjax",function(a,b){a.currentPage=1,a.totalPages=0,a.loadRestaurants=function(){b.getAllRestaurants(a.currentPage).success(function(b){a.restaurant=b.results,a.totalPages="3"})},a.loadRestaurants()}]),angular.module("coursExoApp").controller("PickupserieCtrl",["$scope","$routeParams","$route","serviceAjax",function(a,b,c,d){var e;void 0!=b.genre&&(e=b.genre,a.genreNexter=e),console.log("$routeParams.genre:"+e);var f=Math.floor(100*Math.random()),g=Math.floor(6*Math.random());a.currentPage=f,a.loading=!1,a.genre={model:null,availableOptions:[{id:"1",name:"Comédie dramatique"},{id:"2",name:"Comédie Humourisitique"},{id:"3",name:"Documentaire"},{id:"4",name:"SciFi"}]},a.loadMovies=function(b){if(a.loading=!0,void 0!==b){switch(b){case"action":b=10759;break;case"scifi":b=10765;break;case"comedie":b=35;break;case"anime":b=16;break;case"drame":b=18;break;default:b=void 0}d.goodSerieByGenre(f,b).success(function(b){var c=b.results[g];console.log(c),a.loading=!1,a.movies=c,a.totalPages=b.total_pages})}else void 0===b&&d.goodSerie(f).success(function(b){var c=b.results[g];console.log("test selectedGenre != undefined FAILED : "+c),a.loading=!1,a.movies=c,a.totalPages=b.total_pages})},a.pageChanged=function(){a.loadMovies()},a.changeGenre=function(){console.log("bind from view"+a.genre.model)},a.changeSuggestion=function(b){b=a.genre.model,console.log("from PickupserieCtrl(changeSuggestion):"+b),a.loadMovies(b)},a.loadMovies(e)}]),angular.module("cineAngularApp").run(["$templateCache",function(a){a.put("views/about.html",'<p>This is the about view.</p> <div>Icons made by <a href="http://www.flaticon.com/authors/business-dubai" title="Business Dubai">Business Dubai</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>'),a.put("views/allrestaurants.html",'<div class="allrestaurants-container" id="top" loading="loading"> <div class="row" ng-show="allrestaurants.length > 1"> <a ng-click="clickPredicateName()" class="col-md-offset-7 col-md-2">Trier par nom</a> <a ng-click="clickPredicateRate()" class="col-md-2">Trier par note</a> </div> <ul class="allrestaurants"> <li ng-repeat="restaurant in allrestaurants"> <div class="row"> <div class="col-md-4"> <img ng-src="http://image.tmdb.org/t/p/w500{{movie.poster_path}}" width="200" height="300"> </div> <div class="col-md-8"> <a ng-href="#/info/{{movie.id}}"><h4 ng-bind="restaurant.title"></h4></a> <div class="row"> <label class="col-md-2">Année:</label> <span class="col-md-8" ng-bind="restaurant.release_date | date:\'yyyy\'"></span> </div> <div class="row"> <label class="col-md-2">Note:</label> <div class="row col-md-10"> <rating class="col-md-6" ng-model="restaurant.vote_average" max="10" readonly></rating> (<span ng-bind="movie.vote_count"></span>&nbspavis) </div> </div> </div> </div> </li> </ul> <div class="row"> <div class="col-md-9 col-md-offset-3"> <pagination total-items="totalPages" ng-model="$parent.currentPage" ng-change="pageChanged()" items-per-page="20" max-size="5" boundary-links="true"></pagination> </div> </div> </div>'),a.put("views/info.html",'<div class="movie_detail" loading="loading"> <div class="row"> <div class="col-md-4"> <img ng-src="http://image.tmdb.org/t/p/w500{{movie.poster_path}}" width="200" height="300"> </div> <div class="col-md-8"> <h2> {{movie.name}} <span class="label label-warning">{{movie.first_air_date| date: \'yyyy\'}}</span><span class="label label-info">{{movie.origin_country[0]}}</span></h2> <div class="row col-md-15"> <rating class="col-md-3" ng-model="movie.vote_average" max="10" readonly></rating> (<span ng-bind="movie.vote_count"></span>&nbspavis) </div>  <dl class="dl-horizontal"> <dt>Genre</dt> <dd> <ul> <li ng-repeat="genre in movie.genres">{{genre.name}}</li> </ul> </dd> <dt ng-show="movie.overview">Synopsis</dt> <dd>{{movie.overview}}</dd> <dt> </dt>  <dd><a href="http://localhost:9000/#/pickupserie"><button type="button" class="btn btn-default" aria-label="Left Align"><span class="glyphicon glyphicon-fast-backward"></span> Retour</button></a><a href="#" ng-click="externalSearch()"><button type="button" class="btn btn-danger" aria-label="Left Align"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span>Lancer la Super Recherche</button></a> <a ng-href="{{videos}}" target="_blank"><button type="button" class="btn btn-default" aria-label="Right Align">Trailer <span class="glyphicon glyphicon-fast-forward"></span></button></a> </dd> </dl> <div ng-show="movie.origin_country[0]==\'JP\'" class="alert alert-danger" role="alert"><p><strong>Attention:</strong> la Super Recherche peut parfois perdre son pouvoir face aux Mangas</p></div> </div> </div> <div class="adBarInfo_hor" ng-show="!movie.overview"> <img src="styles/test_pub.jpeg"> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/movies.html",'<div class="movies-container" id="top" loading="loading"> <div class="row" ng-show="movies.length > 1"> <a ng-click="clickPredicateName()" class="col-md-offset-7 col-md-2">Trier par nom</a> <a ng-click="clickPredicateRate()" class="col-md-2">Trier par note</a> </div> <ul class="movies"> <div class="row"> <div class="col-md-9 col-md-offset-3"> <pagination total-items="totalPages" ng-model="$parent.currentPage" ng-change="pageChanged()" items-per-page="nbItems" max-size="5" boundary-links="true"></pagination> </div> </div> <li ng-repeat="movie in movies | orderBy: orderByPredicate : orderByReverse | limitTo:1"> <div class="row"> <div class="col-md-4"> <img ng-src="http://image.tmdb.org/t/p/w500{{movie.poster_path}}" width="200" height="300"> </div> <div class="col-md-8"> <a ng-href="#/info/{{movie.id}}"><h4 ng-bind="movie.title"></h4></a> <div class="row"> <label class="col-md-2">Année:</label> <span class="col-md-8" ng-bind="movie.release_date | date:\'yyyy\'"></span> </div> <div class="row"> <label class="col-md-2">Note:</label> <div class="row col-md-10"> <rating class="col-md-6" ng-model="movie.vote_average" max="10" readonly></rating> (<span ng-bind="movie.vote_count"></span>&nbspavis) </div> </div> </div> </div> </li> </ul> <div class="row"> <div class="col-md-9 col-md-offset-3"> <pagination total-items="totalPages" ng-model="$parent.currentPage" ng-change="pageChanged()" items-per-page="1" max-size="5" boundary-links="true"></pagination> </div> </div> </div>'),a.put("views/pickupserie.html",'<nav class="navbar navbar-inverse"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#">Suggérer une série</a> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> <ul class="nav navbar-nav"> <li class="active"><a href="#">Genres : <span class="sr-only">(current)</span></a></li> <li><a href="http://localhost:9000/#/pickupserie?genre=scifi" ng-click="loadMovies(\'scifi\')">Sci-Fi</a></li> <li><a href="http://localhost:9000/#/pickupserie?genre=anime">Anime</a></li> <li><a href="http://localhost:9000/#/pickupserie?genre=action">Action</a></li> <li><a href="http://localhost:9000/#/pickupserie?genre=comedie">Comédie</a></li> <li><a href="http://localhost:9000/#/pickupserie?genre=drame">Drames</a></li> <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Autres genre<span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="#">A venir</a></li> <li role="separator" class="divider"></li> <li><a href="#"></a></li> <li role="separator" class="divider"></li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li><a href="#">Qu\'est-ce que Docteur Série ?</a></li> <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> FAQ <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="#"></a></li> <li><a href="#"></a></li> <li><a href="#"></a></li> <li role="separator" class="divider"></li> <li><a href="#"></a></li> </ul> </li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container-fluid --> </nav> <!-- NEW VIEW IMPLEMENTATION --> <!--AMAZON Package--> <!-- Amazon Theme : Geek General Books --> <div style="position:absolute;width:40px;top:350px;left:90px" ng-show="genreNexter===undefined"> <a href="https://www.amazon.fr/Cin%C3%A9geek-Pluttark/dp/2756063525/ref=as_li_ss_il?_encoding=UTF8&psc=1&refRID=6EY2WMW7TFGZ1M05PSN1&linkCode=li3&tag=leselections-21&linkId=be37ae180e4d235e8b8a4944d900cc80" target="_blank"><img border="0" src="//ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=2756063525&Format=_SL250_&ID=AsinImage&MarketPlace=FR&ServiceVersion=20070822&WS=1&tag=leselections-21"></a><img src="https://ir-fr.amazon-adsystem.com/e/ir?t=leselections-21&l=li3&o=8&a=2756063525" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important"> </div> <div style="position:absolute;width:40px;top:350px;right:300px" ng-show="genreNexter===undefined"> <a href="https://www.amazon.fr/Cuisine-pour-geeks-Liguori-LECOMTE/dp/2263146504/ref=as_li_ss_il?s=books&ie=UTF8&qid=1492268618&sr=1-2&keywords=livre+geek&linkCode=li3&tag=leselections-21&linkId=02fd06bce0605f1926d3950d3d441cb3" target="_blank"><img border="0" src="//ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=2263146504&Format=_SL250_&ID=AsinImage&MarketPlace=FR&ServiceVersion=20070822&WS=1&tag=leselections-21"></a><img src="https://ir-fr.amazon-adsystem.com/e/ir?t=leselections-21&l=li3&o=8&a=2263146504" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important"> </div> <!--endOfGeekGeneralBooks--> <!-- Amazon Theme : SciFi --> <div style="position:absolute;width:40px;top:350px;left:90px" ng-show="genreNexter===\'scifi\'"> <a href="https://www.amazon.fr/Star-Wars-manuel-du-Jedi/dp/2035906156/ref=as_li_ss_il?s=books&ie=UTF8&qid=1492269892&sr=1-1&keywords=le+manuel+du+jedi&linkCode=li3&tag=leselections-21&linkId=a237d596bb07ba252282f94a4fa97350" target="_blank"><img border="0" src="//ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=2035906156&Format=_SL250_&ID=AsinImage&MarketPlace=FR&ServiceVersion=20070822&WS=1&tag=leselections-21"></a><img src="https://ir-fr.amazon-adsystem.com/e/ir?t=leselections-21&l=li3&o=8&a=2035906156" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important"> </div> <div style="position:absolute;width:40px;top:350px;right:300px" ng-show="genreNexter===\'scifi\'"> <a href="https://www.amazon.fr/Star-Wars-livre-Daniel-Wallace/dp/2035883628/ref=as_li_ss_il?s=books&ie=UTF8&qid=1492269932&sr=1-1&keywords=le+manuel+des+sith&linkCode=li3&tag=leselections-21&linkId=67152ab2baf2a7c59c37cd33db5d3a90" target="_blank"><img border="0" src="//ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=2035883628&Format=_SL250_&ID=AsinImage&MarketPlace=FR&ServiceVersion=20070822&WS=1&tag=leselections-21"></a><img src="https://ir-fr.amazon-adsystem.com/e/ir?t=leselections-21&l=li3&o=8&a=2035883628" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important"> </div> <!-- endOfScifi --> <!--EndOfAmazon--> <div class="movies-container" id="top" loading="loading"> <div class="o-wrapper"> <div class="c-movie-card"> <div class="c-movie-card__img" style="background-image:url(http://image.tmdb.org/t/p/w500{{movies.poster_path}})"></div> <div class="c-movie-card__btn-cont"> <span class="c-movie-card__rating" ng-show="movies.vote_average > 0"> {{movies.vote_average}}/10 (<span ng-bind="movies.vote_count"></span>&nbspavis)</span> <path d="M38.683 8.05H17.215c-.727 0-1.317.59-1.317 1.314 0 .728.59 1.317 1.317 1.317h19.828l-2.51 11.203H15.496L11.07 1.045C10.94.425 10.39.002 9.782.002V0H1.317C.59 0 0 .59 0 1.317c0 .726.59 1.315 1.317 1.315h7.4l4.412 20.76c.094.636.64 1.122 1.302 1.122h21.15v-.005c.603 0 1.146-.417 1.282-1.028l3.073-13.714c.04-.128.063-.262.063-.404 0-.725-.59-1.315-1.317-1.315zM32.365 27.817c-1.128 0-2.155.443-2.917 1.165-.03.026-.058.05-.086.08-.77.767-1.244 1.828-1.244 3s.475 2.233 1.245 3h.002c.77.77 1.832 1.246 3 1.246 1.17 0 2.232-.477 3.003-1.25.77-.77 1.245-1.828 1.245-2.997 0-1.17-.475-2.23-1.245-3-.767-.768-1.83-1.243-3.003-1.243z">    </div> <div class="c-movie-card__content"> <a ng-href="#/info/{{movies.id}}"><h1 class="c-movie-card__title">{{movies.name}}</h1></a> <p class="c-movie-card__description"> </p> </div> <span class="c-icons__arow"> <a ng-href="#" ng-click="changeSuggestion({{genreNexter}})"><svg version="1.1" viewbox="0 0 28.6 8"> <style type="text/css">.st0{fill:#E5E5E5;}</style> <path class="st0" d="M0.4,1.5L14,7.9c0,0,0,0,0,0c0,0,0.1,0,0.1,0c0,0,0,0,0.1,0c0,0,0.1,0,0.1,0c0,0,0,0,0.1,0c0,0,0.1,0,0.1,0\n  c0,0,0,0,0.1,0c0,0,0,0,0.1,0c0,0,0,0,0.1,0c0,0,0,0,0,0l13.6-6.5c0.4-0.2,0.5-0.6,0.4-1C28.4,0.2,28.2,0,27.9,0\n  c-0.1,0-0.2,0-0.3,0.1L14.3,6.4L1.1,0.1C1,0,0.9,0,0.8,0C0.5,0,0.2,0.2,0.1,0.4C-0.1,0.8,0.1,1.3,0.4,1.5z"> </svg></a> </span> </div> </div> </div>')}]);